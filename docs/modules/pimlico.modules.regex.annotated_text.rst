!! Regex annotated text matcher
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

.. py:module:: pimlico.modules.regex.annotated_text

.. note::

   This module has not yet been updated to the new datatype system, so cannot be used in the `datatypes` branch. Soon it will be updated.

+------------+--------------------------------------+
| Path       | pimlico.modules.regex.annotated_text |
+------------+--------------------------------------+
| Executable | yes                                  |
+------------+--------------------------------------+

.. todo::

   Document this module

.. todo::

   Update to new datatypes system and add test pipeline


Inputs
======

+-----------+--------------------------------------+
| Name      | Type(s)                              |
+===========+======================================+
| documents | **invalid input type specification** |
+-----------+--------------------------------------+

Outputs
=======

+-----------+---------------------------------------+
| Name      | Type(s)                               |
+===========+=======================================+
| documents | **invalid output type specification** |
+-----------+---------------------------------------+

Options
=======

+------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+
| Name | Description                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | Type   |
+======+===============================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================================+========+
| expr | (required) An expression to determine what to search for in sentences. Consists of a sequence of tokens, each matching one field in the corresponding token's annotations in the data. These are specified in the form field[x], where field is the name of a field supplied by the input data and x is the value required of that field. If x ends in a \*, it will match prefixes: e.g. pos[NN\*]. If no field name is given, the default 'word' is used. A token of the form 'x=y' matches the expression y as above and assigns the matching word to the extracted variable x (to be output). You may also extract a different annotation field by specifying x=f:y, where f is the field name to be extracted. E.g. 'what a=lemma:pos[NN\*] lemma[come] with b=pos[NN\*]' matches phrases like 'what meals come with fries', producing 'a=meal' and 'b=fries'. Both pos and lemma need to be fields in the dataset'. If you give multiple whole expressions separated by \|s, matches will be collected from all of them | string |
+------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+--------+

Example config
==============

This is an example of how this module can be used in a pipeline config file.

.. code-block:: ini
   
   [my_annotated_text_matcher_module]
   type=pimlico.modules.regex.annotated_text
   input_documents=module_a.some_output
   expr=value

