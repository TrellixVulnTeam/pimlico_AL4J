LDA trainer
~~~~~~~~~~~

.. py:module:: pimlico.modules.gensim.lda

+------------+----------------------------+
| Path       | pimlico.modules.gensim.lda |
+------------+----------------------------+
| Executable | yes                        |
+------------+----------------------------+

Trains LDA using Gensim's `basic LDA implementation <https://radimrehurek.com/gensim/models/ldamodel.html>`_,
or `the multicore version <https://radimrehurek.com/gensim/models/ldamulticore.html>`_.

.. todo::

   Add test pipeline and test


Inputs
======

+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Name   | Type(s)                                                                                                                                                                 |
+========+=========================================================================================================================================================================+
| corpus | :class:`grouped_corpus <pimlico.datatypes.corpora.grouped.GroupedCorpus>` <:class:`IntegerListsDocumentType <pimlico.datatypes.corpora.ints.IntegerListsDocumentType>`> |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| vocab  | :class:`dictionary <pimlico.datatypes.dictionary.Dictionary>`                                                                                                           |
+--------+-------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Outputs
=======

+-------+--------------------------------------------------------------+
| Name  | Type(s)                                                      |
+=======+==============================================================+
| model | :class:`lda_model <pimlico.datatypes.gensim.GensimLdaModel>` |
+-------+--------------------------------------------------------------+

Options
=======

+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| Name                | Description                                                                                                                                                                                                                                        | Type                                         |
+=====================+====================================================================================================================================================================================================================================================+==============================================+
| num_topics          | Number of topics for the trained model to have. Default: 100                                                                                                                                                                                       | int                                          |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| alpha               | Alpha prior over topic distribution. May be one of special values 'symmetric', 'asymmetric' and 'auto', or a single float, or a list of floats. Default: symmetric                                                                                 | 'symmetric', 'asymmetric', 'auto' or a float |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| gamma_threshold     |                                                                                                                                                                                                                                                    | float                                        |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| multicore           | Use Gensim's multicore implementation of LDA training (gensim.models.ldamulticore). Default is to use gensim.models.ldamodel. Number of cores used for training set by Pimlico's processes parameter                                               | bool                                         |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| chunksize           | Model's chunksize parameter. Chunk size to use for distributed/multicore computing. Default: 2000                                                                                                                                                  | int                                          |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| tfidf               | Transform word counts using TF-IDF when presenting documents to the model for training. Default: False                                                                                                                                             | bool                                         |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| iterations          | Max number of iterations in each update. Default: 50                                                                                                                                                                                               | int                                          |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| offset              | Offset parameter. Default: 1.0                                                                                                                                                                                                                     | float                                        |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| ignore_terms        | Ignore any of these terms in the bags of words when iterating over the corpus to train the model. Typically, you'll want to include an OOV term here if your corpus has one, and any other special terms that are not part of a document's content | comma-separated list of strings              |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| passes              | Passes parameter. Default: 1                                                                                                                                                                                                                       | int                                          |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| eval_every          |                                                                                                                                                                                                                                                    | int                                          |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| minimum_phi_value   |                                                                                                                                                                                                                                                    | float                                        |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| minimum_probability |                                                                                                                                                                                                                                                    | float                                        |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| eta                 | Eta prior of word distribution. May be one of special values 'auto' and 'symmetric', or a float. Default: symmetric                                                                                                                                | 'symmetric', 'auto' or a float               |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| update_every        | Model's update_every parameter. Default: 1. Ignored by multicore implementation                                                                                                                                                                    | int                                          |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| decay               | Decay parameter. Default: 0.5                                                                                                                                                                                                                      | float                                        |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+
| distributed         | Turn on distributed computing. Default: False. Ignored by multicore implementation                                                                                                                                                                 | bool                                         |
+---------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------+

Example config
==============

This is an example of how this module can be used in a pipeline config file.

.. code-block:: ini
   
   [my_lda_trainer_module]
   type=pimlico.modules.gensim.lda
   input_corpus=module_a.some_output
   input_vocab=module_a.some_output
   

This example usage includes more options.

.. code-block:: ini
   
   [my_lda_trainer_module]
   type=pimlico.modules.gensim.lda
   input_corpus=module_a.some_output
   input_vocab=module_a.some_output
   num_topics=100
   alpha=symmetric
   gamma_threshold=0.00
   multicore=F
   chunksize=2000
   tfidf=F
   iterations=50
   offset=1.00
   ignore_terms=
   passes=1
   eval_every=10
   minimum_phi_value=0.01
   minimum_probability=0.01
   eta=symmetric
   update_every=1
   decay=0.50
   distributed=F

